(function(){var t={4918:function(t,e,a){"use strict";var r=a(9963),l=a(6252),o=a.p+"img/logo-tech.ed389fa8.svg";const s={class:"header"},i={class:"header__wrapper container"},c=(0,l._)("span",{class:"header__info"},"Каталог",-1),n=(0,l._)("a",{class:"header__logo",href:"#"},[(0,l._)("img",{src:o,alt:"Логотип интернет магазина Технозавррр",width:"190",height:"33"})],-1),u=(0,l._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1),d=(0,l.uE)('<footer class="footer"><div class="footer__wrapper container"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@technozavrrr.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2020 Технозавррр </span></div></footer>',1);function _(t,e,a,r,o,_){const p=(0,l.up)("CartIndicator"),m=(0,l.up)("RouterView");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("header",s,[(0,l._)("div",i,[c,n,u,(0,l.Wm)(p)])]),(0,l.Wm)(m),d])}var p=a(3907),m=a(3577);const h=(0,l._)("svg",{width:"30",height:"21",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-cart"})],-1),g={class:"header__count","aria-label":"Количество товаров"};function f(t,e,a,r,o,s){const i=(0,l.up)("RouterLink");return(0,l.wg)(),(0,l.j4)(i,{class:"header__cart",to:{name:"cart"},"aria-label":"Корзина с товарами"},{default:(0,l.w5)((()=>[h,(0,l._)("span",g,(0,m.zw)(t.$store.state.cartProducts.length),1)])),_:1})}var b={},v=a(3744);const y=(0,v.Z)(b,[["render",f]]);var k=y,w={components:{CartIndicator:k},created(){const t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.loadCart()},methods:{...(0,p.nv)(["loadCart"]),...(0,p.OI)(["updateUserAccessKey"])}};const P=(0,v.Z)(w,[["render",_]]);var C=P;const D={messageOne:"Hello world",messageTwo:"Hello Vue"};var I=D,L=a(2201);const z={class:"preloader-4",style:{position:"absolute",top:"50%",left:"50%","z-index":"1000"}},T=(0,l._)("div",null,null,-1),x=(0,l._)("div",null,null,-1),F=(0,l._)("div",null,null,-1),U=(0,l._)("div",null,null,-1),A=(0,l._)("div",null,null,-1),$=(0,l._)("div",null,null,-1),K=(0,l._)("div",null,null,-1),S=(0,l._)("div",null,null,-1),E=(0,l._)("div",null,null,-1),Z=[T,x,F,U,A,$,K,S,E],O={class:"content__top"},W={class:"breadcrumbs"},M={class:"breadcrumbs__item"},V={class:"breadcrumbs__item"},j=(0,l._)("li",{class:"breadcrumbs__item"},[(0,l._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),q=(0,l._)("h1",{class:"content__title"}," Корзина ",-1),B={class:"content__info"},H={class:"cart"},Y={class:"cart__field"},G={class:"cart__data"},R={class:"cart__options"},N=(0,l._)("h3",{class:"cart__title"},"Доставка",-1),Q={class:"cart__options options"},X={class:"options__item"},J={class:"options__label"},tt=(0,l._)("span",{class:"options__value"},[(0,l.Uk)(" Самовывоз "),(0,l._)("b",null,"бесплатно")],-1),et={class:"options__item"},at={class:"options__label"},rt=(0,l._)("span",{class:"options__value"},[(0,l.Uk)(" Курьером "),(0,l._)("b",null,"500 ₽")],-1),lt=(0,l.uE)('<h3 class="cart__title">Оплата</h3><ul class="cart__options options"><li class="options__item"><label class="options__label"><input class="options__radio sr-only" type="radio" name="pay" value="card"><span class="options__value"> Картой при получении </span></label></li><li class="options__item"><label class="options__label"><input class="options__radio sr-only" type="radio" name="pay" value="cash"><span class="options__value"> Наличными при получении </span></label></li></ul>',2),ot={class:"cart__block"},st={class:"cart__orders"},it={key:0},ct={class:"cart__total"},nt=(0,l._)("button",{class:"cart__button button button--primery",type:"submit"}," Оформить заказ ",-1),ut={key:0,class:"cart__error form__error-block"},dt=(0,l._)("h4",null,"Заявка не отправлена!",-1);function _t(t,e,a,o,s,i){const c=(0,l.up)("RouterLink"),n=(0,l.up)("BaseFormText"),u=(0,l.up)("BaseFormTextarea");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)((0,l._)("main",z,Z,512),[[r.F8,s.productLoading]]),(0,l._)("main",{class:(0,m.C_)(["content container",{gray:s.productLoading}])},[(0,l._)("div",O,[(0,l._)("ul",W,[(0,l._)("li",M,[(0,l.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Каталог ")])),_:1})]),(0,l._)("li",V,[(0,l.Wm)(c,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Корзина ")])),_:1})]),j]),q,(0,l._)("span",B,(0,m.zw)(t.products.length)+" товар"+(0,m.zw)(t.grammar(t.products.length)),1)]),(0,l._)("section",H,[(0,l._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:e[7]||(e[7]=(0,r.iM)(((...t)=>i.order&&i.order(...t)),["prevent"]))},[(0,l._)("div",Y,[(0,l._)("div",G,[(0,l.Wm)(n,{value:s.formData.name,"onUpdate:value":e[0]||(e[0]=t=>s.formData.name=t),error:s.formError.name,type:"text",title:"ФИО",placeholder:"Введите ваше полное имя"},null,8,["value","error"]),(0,l.Wm)(n,{value:s.formData.address,"onUpdate:value":e[1]||(e[1]=t=>s.formData.address=t),error:s.formError.address,type:"text",title:"Адрес доставки",placeholder:"Введите ваш адрес"},null,8,["value","error"]),(0,l.Wm)(n,{value:s.formData.phone,"onUpdate:value":e[2]||(e[2]=t=>s.formData.phone=t),error:s.formError.phone,type:"tel",title:"Телефон",placeholder:"Введите ваш телефон"},null,8,["value","error"]),(0,l.Wm)(n,{value:s.formData.email,"onUpdate:value":e[3]||(e[3]=t=>s.formData.email=t),error:s.formError.email,type:"tel",title:"Email",placeholder:"Введите ваш Email"},null,8,["value","error"]),(0,l.Wm)(u,{value:s.formData.comment,"onUpdate:value":e[4]||(e[4]=t=>s.formData.comment=t),title:"Комментарий к заказу",error:s.formError.comment,placeholder:"Ваши пожелания"},null,8,["value","error"])]),(0,l._)("div",R,[N,(0,l._)("ul",Q,[(0,l._)("li",X,[(0,l._)("label",J,[(0,l.wy)((0,l._)("input",{class:"options__radio sr-only",type:"radio",name:"delivery",value:"0","onUpdate:modelValue":e[5]||(e[5]=t=>s.deliveryCost=t)},null,512),[[r.G2,s.deliveryCost,void 0,{number:!0}]]),tt])]),(0,l._)("li",et,[(0,l._)("label",at,[(0,l.wy)((0,l._)("input",{class:"options__radio sr-only",type:"radio",name:"delivery",value:"500",checked:"","onUpdate:modelValue":e[6]||(e[6]=t=>s.deliveryCost=t)},null,512),[[r.G2,s.deliveryCost,void 0,{number:!0}]]),rt])])]),lt])]),(0,l._)("div",ot,[(0,l._)("ul",st,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.products,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"cart__order",key:t.productId},[(0,l._)("h3",null,[(0,l.Uk)((0,m.zw)(t.product.title)+" ",1),t.amount>0?((0,l.wg)(),(0,l.iD)("h3",it,"x "+(0,m.zw)(t.amount),1)):(0,l.kq)("",!0)]),(0,l._)("b",null,(0,m.zw)((t.product.price*t.amount).toLocaleString())+" ₽",1),(0,l._)("span",null,"Артикул: "+(0,m.zw)(t.product.id),1)])))),128))]),(0,l._)("div",ct,[(0,l._)("p",null,[(0,l.Uk)("Доставка: "),(0,l._)("b",null,(0,m.zw)(s.deliveryCost)+" ₽",1)]),(0,l._)("p",null,[(0,l.Uk)("Итого: "),(0,l._)("b",null,(0,m.zw)(t.products.length),1),(0,l.Uk)(" товар"+(0,m.zw)(t.grammar(t.products.length))+" на сумму ",1),(0,l._)("b",null,(0,m.zw)((t.totalPrice+Number(s.deliveryCost)).toLocaleString())+" ₽",1)])]),nt]),s.formErrorMessage?((0,l.wg)(),(0,l.iD)("div",ut,[dt,(0,l._)("p",null,(0,m.zw)(s.formErrorMessage),1)])):(0,l.kq)("",!0)],32)])],2)],64)}a(7658);const pt=["type","placeholder"];function mt(t,e,a,o,s,i){const c=(0,l.up)("BaseFormField");return(0,l.wg)(),(0,l.j4)(c,{title:t.title,error:t.error},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("input",{class:"form__input","onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),type:a.type,placeholder:t.placeholder},null,8,pt),[[r.YZ,t.dataValue]])])),_:1},8,["title","error"])}const ht={class:"form__label"},gt={class:"form__value"},ft={key:0,class:"form__error"};function bt(t,e,a,r,o,s){return(0,l.wg)(),(0,l.iD)("label",ht,[(0,l.WI)(t.$slots,"default"),(0,l._)("span",gt,(0,m.zw)(a.title),1),a.error?((0,l.wg)(),(0,l.iD)("span",ft,(0,m.zw)(a.error),1)):(0,l.kq)("",!0)])}var vt={props:["title","error"]};const yt=(0,v.Z)(vt,[["render",bt]]);var kt=yt,wt={props:["title","error","placeholder","value"],components:{BaseFormField:kt},computed:{dataValue:{get(){return this.value},set(t){this.$emit("update:value",t)}}}},Pt={props:["type"],mixins:[wt]};const Ct=(0,v.Z)(Pt,[["render",mt]]);var Dt=Ct;const It=["placeholder"];function Lt(t,e,a,o,s,i){const c=(0,l.up)("BaseFormField");return(0,l.wg)(),(0,l.j4)(c,{title:t.title,error:t.error},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("textarea",{class:"form__input form__input--area","onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),placeholder:t.placeholder},null,8,It),[[r.nr,t.dataValue]])])),_:1},8,["title","error"])}var zt={mixins:[wt]};const Tt=(0,v.Z)(zt,[["render",Lt]]);var xt=Tt;const Ft={class:"cart__item product"},Ut={class:"product__pic"},At=["src","alt"],$t={class:"product__title"},Kt={class:"product__color"},St={class:"product__code"},Et={class:"product__counter form__counter"},Zt=(0,l._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-minus"})],-1),Ot=[Zt],Wt=(0,l._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-plus"})],-1),Mt=[Wt],Vt={class:"product__price"},jt=(0,l._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-close"})],-1),qt=[jt];function Bt(t,e,a,o,s,i){return(0,l.wg)(),(0,l.iD)("li",Ft,[(0,l._)("div",Ut,[(0,l._)("img",{src:a.item.product.image,width:"120",height:"120",alt:a.item.product.title},null,8,At)]),(0,l._)("h3",$t,(0,m.zw)(a.item.product.title),1),(0,l._)("p",Kt,[(0,l.Uk)(" Цвет: "),(0,l._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":a.item.product.color})},null,4)]),(0,l._)("span",St," Артикул: "+(0,m.zw)(a.item.product.id),1),(0,l._)("div",Et,[(0,l._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[0]||(e[0]=(...t)=>i.decrement&&i.decrement(...t))},Ot),(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>i.amount=t),name:"count"},null,512),[[r.nr,i.amount,void 0,{number:!0}]]),(0,l._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[2]||(e[2]=(...t)=>i.increment&&i.increment(...t))},Mt)]),(0,l._)("b",Vt,(0,m.zw)((a.item.amount*a.item.product.price).toLocaleString())+" ₽ ",1),(0,l._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:e[3]||(e[3]=(0,r.iM)((t=>i.deleteProduct(a.item.productId)),["prevent"]))},qt)])}var Ht={props:["item"],computed:{amount:{get(){return this.item.amount},set(t){this.$store.dispatch("updateCartProductAmount",{productId:this.item.productId,amount:t})}}},methods:{...(0,p.nv)(["deleteCartProduct"]),deleteProduct(){this.deleteCartProduct({productId:this.item.productId})},increment(){this.amount++},decrement(){this.amount>1&&this.amount--}}};const Yt=(0,v.Z)(Ht,[["render",Bt]]);var Gt=Yt,Rt={data(){return{productsLoading:!1,productsLoadingFailed:!1}},components:{CartItem:Gt},computed:{...(0,p.Se)({products:"cartDetailProducts",totalPrice:"cartTotalPrice"})},methods:{...(0,p.Se)({productsLoading:"productsLoading",productsLoadingFailed:"productsLoadingFailed"}),grammar(t){let e="";return e=1===t?"":[2,3,4].includes(t%10)?"а":"ов",e}}},Nt=a(8945);const Qt="https://vue-study.skillbox.cc";var Xt={mixins:[Rt],components:{BaseFormText:Dt,BaseFormTextarea:xt},data(){return{productLoading:!1,formData:{},formError:{},deliveryCost:500,formErrorMessage:""}},methods:{order(){this.productLoading=!0,this.formError={},this.formErrorMessage="",clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{Nt.Z.post(`${Qt}/api/orders`,{...this.formData},{params:{userAccessKey:this.$store.state.userAccessKey}}).then((t=>{this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo",t.data),this.$router.push({name:"orderInfo",params:{id:t.data.id}})})).catch((t=>{this.formError=t.response.data.error.request||{},this.formErrorMessage=t.response.data.error.message})).then((()=>this.productLoading=!1))}),2e3)}}};const Jt=(0,v.Z)(Xt,[["render",_t]]);var te=Jt;const ee={class:"content container"},ae={class:"content__top"},re={class:"breadcrumbs"},le={class:"breadcrumbs__item"},oe={class:"breadcrumbs__item"},se=(0,l._)("li",{class:"breadcrumbs__item"},[(0,l._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),ie={class:"content__title"},ce={class:"cart"},ne={class:"cart__form form",action:"#",method:"POST"},ue={class:"cart__field"},de=(0,l._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),_e={class:"dictionary"},pe={class:"dictionary__item"},me=(0,l._)("span",{class:"dictionary__key"}," Получатель ",-1),he={class:"dictionary__value"},ge={class:"dictionary__item"},fe=(0,l._)("span",{class:"dictionary__key"}," Адрес доставки ",-1),be={class:"dictionary__value"},ve={class:"dictionary__item"},ye=(0,l._)("span",{class:"dictionary__key"}," Телефон ",-1),ke={class:"dictionary__value"},we={class:"dictionary__item"},Pe=(0,l._)("span",{class:"dictionary__key"}," Email ",-1),Ce={class:"dictionary__value"},De=(0,l._)("li",{class:"dictionary__item"},[(0,l._)("span",{class:"dictionary__key"}," Способ оплаты "),(0,l._)("span",{class:"dictionary__value"}," картой при получении ")],-1),Ie={class:"cart__block"},Le={class:"cart__orders"},ze={class:"cart__order"},Te={key:0},xe={class:"cart__total"},Fe=(0,l._)("p",null,[(0,l.Uk)("Доставка: "),(0,l._)("b",null,"500 ₽")],-1);function Ue(t,e,a,r,o,s){const i=(0,l.up)("RouterLink");return(0,l.wg)(),(0,l.iD)("main",ee,[(0,l._)("div",ae,[(0,l._)("ul",re,[(0,l._)("li",le,[(0,l.Wm)(i,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Каталог ")])),_:1})]),(0,l._)("li",oe,[(0,l.Wm)(i,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Корзина ")])),_:1})]),se]),(0,l._)("h1",ie,[(0,l.Uk)(" Заказ оформлен "),(0,l._)("span",null,"№ "+(0,m.zw)(t.orderInfoPage.id),1)])]),(0,l._)("section",ce,[(0,l._)("form",ne,[(0,l._)("div",ue,[de,(0,l._)("ul",_e,[(0,l._)("li",pe,[me,(0,l._)("span",he,(0,m.zw)(t.orderInfoPage.name),1)]),(0,l._)("li",ge,[fe,(0,l._)("span",be,(0,m.zw)(t.orderInfoPage.address),1)]),(0,l._)("li",ve,[ye,(0,l._)("span",ke,(0,m.zw)(t.orderInfoPage.phone),1)]),(0,l._)("li",we,[Pe,(0,l._)("span",Ce,(0,m.zw)(t.orderInfoPage.email),1)]),De])]),(0,l._)("div",Ie,[(0,l._)("ul",Le,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.orderInfoPage.basket.items,(t=>((0,l.wg)(),(0,l.iD)("li",ze,[(0,l._)("h3",null,[(0,l.Uk)((0,m.zw)(t.product.title)+" ",1),t.quantity>0?((0,l.wg)(),(0,l.iD)("h3",Te,"x "+(0,m.zw)(t.quantity),1)):(0,l.kq)("",!0)]),(0,l._)("b",null,(0,m.zw)(t.price.toLocaleString())+" ₽",1),(0,l._)("span",null,"Артикул: "+(0,m.zw)(t.product.id),1)])))),256))]),(0,l._)("div",xe,[Fe,(0,l._)("p",null,[(0,l.Uk)("Итого: "),(0,l._)("b",null,(0,m.zw)(t.orderInfoPage.basket.items.length),1),(0,l.Uk)(" товар"+(0,m.zw)(t.grammar(t.orderInfoPage.basket.items.length))+" на сумму ",1),(0,l._)("b",null,(0,m.zw)((t.orderInfoPage.totalPrice+o.deliveryCost).toLocaleString())+" ₽",1)])])])])])])}var Ae={data(){return{deliveryCost:500}},mixins:[Rt],computed:{...(0,p.Se)({orderInfoPage:"orderDetailRequest"})},created(){this.$store.state.orderInfo&&this.$store.state.orderInfo.id===this.$route.params.id||this.$store.dispatch("loadOrderInfo",this.$route.params.id)}};const $e=(0,v.Z)(Ae,[["render",Ue]]);var Ke=$e;const Se={class:"content container"},Ee=(0,l._)("div",{class:"content__top content__top--catalog"},[(0,l._)("h1",{class:"content__title"}," Каталог "),(0,l._)("span",{class:"content__info"}," 152 товара ")],-1),Ze={class:"content__catalog"},Oe={class:"catalog"},We={key:0,class:"preloader-4"},Me=(0,l._)("div",null,null,-1),Ve=(0,l._)("div",null,null,-1),je=(0,l._)("div",null,null,-1),qe=(0,l._)("div",null,null,-1),Be=(0,l._)("div",null,null,-1),He=(0,l._)("div",null,null,-1),Ye=(0,l._)("div",null,null,-1),Ge=(0,l._)("div",null,null,-1),Re=(0,l._)("div",null,null,-1),Ne=[Me,Ve,je,qe,Be,He,Ye,Ge,Re],Qe={key:2};function Xe(t,e,a,o,s,i){const c=(0,l.up)("ProductFilter"),n=(0,l.up)("ProductList"),u=(0,l.up)("BasePagination");return(0,l.wg)(),(0,l.iD)("main",Se,[Ee,(0,l._)("div",Ze,[(0,l.Wm)(c,{priceFrom:s.filterPriceFrom,"onUpdate:priceFrom":e[0]||(e[0]=t=>s.filterPriceFrom=t),priceTo:s.filterPriceTo,"onUpdate:priceTo":e[1]||(e[1]=t=>s.filterPriceTo=t),categoryId:s.filterCategoryId,"onUpdate:categoryId":e[2]||(e[2]=t=>s.filterCategoryId=t),categoryIdModifiers:{number:!0},color:s.filterColor,"onUpdate:color":e[3]||(e[3]=t=>s.filterColor=t),products:i.products},null,8,["priceFrom","priceTo","categoryId","color","products"]),(0,l._)("section",Oe,[s.productsLoading?((0,l.wg)(),(0,l.iD)("div",We,Ne)):((0,l.wg)(),(0,l.j4)(n,{key:1,products:i.products,onGotoPage:e[4]||(e[4]=(e,a)=>t.$emit("gotoPage",e,a))},null,8,["products"])),(0,l.Wm)(u,{page:s.page,count:i.countProducts,"per-page":s.productsPerPage,onPaginate:e[5]||(e[5]=t=>s.page=t)},null,8,["page","count","per-page"]),s.productsLoadingFailed?((0,l.wg)(),(0,l.iD)("div",Qe,[(0,l.Uk)("Произошла ошибка при загрузке товаров. Попробуйте позднее "),(0,l._)("button",{onClick:e[6]||(e[6]=(0,r.iM)(((...t)=>i.loadProducts&&i.loadProducts(...t)),["prevent"]))},"Попробовать еще раз")])):(0,l.kq)("",!0)])])])}const Je={class:"catalog__list"};function ta(t,e,a,r,o,s){const i=(0,l.up)("ProductItem");return(0,l.wg)(),(0,l.iD)("ul",Je,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.products,(a=>((0,l.wg)(),(0,l.iD)("li",{class:"catalog__item",key:a.id},[(0,l.Wm)(i,{product:a,onGotoPage:e[0]||(e[0]=(e,a)=>t.$emit("gotoPage",e,a))},null,8,["product"])])))),128))])}const ea=["src","alt"],aa={class:"catalog__title"},ra={href:"#"},la={class:"catalog__price"},oa={class:"colors colors--black"},sa={class:"colors__label"},ia=["value"];function ca(t,e,a,o,s,i){const c=(0,l.up)("RouterLink");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(c,{class:"catalog__pic",href:"#",to:{name:"product",params:{id:a.product.id}}},{default:(0,l.w5)((()=>[(0,l._)("img",{src:a.product.image,alt:a.product.title},null,8,ea)])),_:1},8,["to"]),(0,l._)("h3",aa,[(0,l._)("a",ra,(0,m.zw)(a.product.title),1)]),(0,l._)("span",la,(0,m.zw)(a.product.price.toLocaleString()),1),(0,l._)("ul",oa,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.product.colors,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"colors__item",key:a.product.id},[(0,l._)("label",sa,[(0,l.wy)((0,l._)("input",{class:"colors__radio sr-only",type:"radio",value:t.title,"onUpdate:modelValue":e[0]||(e[0]=t=>s.color=t)},null,8,ia),[[r.G2,s.color]]),(0,l._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":t.code})},null,4)])])))),128))])],64)}var na={data(){return{color:"blue"}},props:["product"]};const ua=(0,v.Z)(na,[["render",ca]]);var da=ua,_a={props:["products"],components:{ProductItem:da}};const pa=(0,v.Z)(_a,[["render",ta]]);var ma=pa;const ha={class:"catalog__pagination pagination"},ga={class:"pagination__item"},fa=["disabled"],ba=(0,l._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-arrow-left"})],-1),va=[ba],ya=["onClick"],ka={class:"pagination__item"},wa=["disabled"],Pa=(0,l._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-arrow-right"})],-1),Ca=[Pa];function Da(t,e,a,o,s,i){return(0,l.wg)(),(0,l.iD)("ul",ha,[(0,l._)("li",ga,[(0,l._)("a",{href:"#",class:(0,m.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":1==a.page}]),onClick:e[0]||(e[0]=(0,r.iM)((t=>i.paginate(--a.page)),["prevent"])),disabled:1==a.page,"aria-label":"Предыдущая страница"},va,10,fa)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.pages,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"pagination__item",key:t},[(0,l._)("a",{href:"#",class:(0,m.C_)(["pagination__link",{"pagination__link--current":t===a.page}]),onClick:(0,r.iM)((e=>i.paginate(t)),["prevent"])},(0,m.zw)(t),11,ya)])))),128)),(0,l._)("li",ka,[(0,l._)("a",{class:(0,m.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":a.page==i.pages}]),href:"#","aria-label":"Следующая страница",onClick:e[1]||(e[1]=(0,r.iM)((t=>i.paginate(++a.page)),["prevent"])),disabled:a.page==i.pages},Ca,10,wa)])])}var Ia={props:["page","count","perPage"],computed:{pages(){return Math.ceil(this.count/this.perPage)}},methods:{paginate(t){console.log("Page changed to",t),this.$emit("paginate",t)}}};const La=(0,v.Z)(Ia,[["render",Da]]);var za=La;const Ta={class:"filter"},xa=(0,l._)("h2",{class:"filter__title"},"Фильтры",-1),Fa={class:"form__block"},Ua=(0,l._)("legend",{class:"form__legend"},"Цена",-1),Aa={class:"form__label form__label--price"},$a=(0,l._)("span",{class:"form__value"},"От",-1),Ka={class:"form__label form__label--price"},Sa=(0,l._)("span",{class:"form__value"},"До",-1),Ea={class:"form__block"},Za=(0,l._)("legend",{class:"form__legend"},"Категория",-1),Oa={class:"form__label form__label--select"},Wa=(0,l._)("option",{value:"0"},"Все категории",-1),Ma=["value"],Va={class:"form__block"},ja=(0,l._)("legend",{class:"form__legend"},"Цвет",-1),qa={class:"colors"},Ba={class:"colors__label"},Ha=["name","value"],Ya=(0,l.uE)('<fieldset class="form__block"><legend class="form__legend">Объемб в ГБ</legend><ul class="check-list"><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="8" checked=""><span class="check-list__desc"> 8 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="16"><span class="check-list__desc"> 16 <span>(461)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="32"><span class="check-list__desc"> 32 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="64"><span class="check-list__desc"> 64 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="128"><span class="check-list__desc"> 128 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="264"><span class="check-list__desc"> 264 <span>(313)</span></span></label></li></ul></fieldset><button class="filter__submit button button--primery" type="submit"> Применить </button>',2);function Ga(t,e,a,o,s,i){return(0,l.wg)(),(0,l.iD)("aside",Ta,[xa,(0,l._)("form",{class:"filter__form form",action:"#",method:"get",onSubmit:e[5]||(e[5]=(0,r.iM)(((...t)=>i.submit&&i.submit(...t)),["prevent"]))},[(0,l._)("fieldset",Fa,[Ua,(0,l._)("label",Aa,[(0,l.wy)((0,l._)("input",{class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":e[0]||(e[0]=t=>s.currentPriceFrom=t)},null,512),[[r.nr,s.currentPriceFrom,void 0,{number:!0}]]),$a]),(0,l._)("label",Ka,[(0,l.wy)((0,l._)("input",{class:"form__input",type:"text",name:"max-price","onUpdate:modelValue":e[1]||(e[1]=t=>s.currentPriceTo=t)},null,512),[[r.nr,s.currentPriceTo,void 0,{number:!0}]]),Sa])]),(0,l._)("fieldset",Ea,[Za,(0,l._)("label",Oa,[(0,l.wy)((0,l._)("select",{class:"form__select",type:"text",name:"category","onUpdate:modelValue":e[2]||(e[2]=t=>s.currentCategoryId=t)},[Wa,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.categories,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t.id,key:t.id},(0,m.zw)(t.title),9,Ma)))),128))],512),[[r.bM,s.currentCategoryId]])])]),(0,l._)("fieldset",Va,[ja,(0,l._)("ul",qa,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.colorsList,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"colors__item",key:t.id},[(0,l._)("label",Ba,[(0,l.wy)((0,l._)("input",{class:"colors__radio sr-only",type:"radio",name:t.title,value:t.id,"onUpdate:modelValue":e[3]||(e[3]=t=>s.currentColor=t)},null,8,Ha),[[r.G2,s.currentColor]]),(0,l._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":t.code})},null,4)])])))),128))])]),Ya,(0,l._)("button",{class:"filter__reset button button--second",type:"button",onClick:e[4]||(e[4]=(0,r.iM)(((...t)=>i.reset&&i.reset(...t)),["prevent"]))}," Сбросить ")],32)])}var Ra={data(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentColor:0,categoriesData:null,colorsData:null}},props:["priceFrom","priceTo","categoryId","color"],computed:{categories(){return this.categoriesData?this.categoriesData.items:[]},colorsList(){return this.colorsData?this.colorsData.items:[]}},watch:{priceFrom(t){this.currentPriceFrom=t},priceTo(t){this.currentPriceTo=t},categoryId(t){this.currentCategoryId=t},color(t){this.currentColor=t}},methods:{submit(){this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:color",this.currentColor)},reset(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",0),this.$emit("update:categoryId",0),this.$emit("update:color",0)},loadCategories(){Nt.Z.get(`${Qt}/api/productCategories`).then((t=>this.categoriesData=t.data))},loadColors(){Nt.Z.get(`${Qt}/api/colors`).then((t=>this.colorsData=t.data))}},created(){this.loadCategories(),this.loadColors()}};const Na=(0,v.Z)(Ra,[["render",Ga]]);var Qa=Na,Xa={components:{ProductList:ma,BasePagination:za,ProductFilter:Qa},data(){return{products:null,filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColor:0,page:1,productsPerPage:3,productsData:null,productsLoading:!1,productsLoadingFailed:!1}},computed:{products(){return this.productsData?this.productsData.items.map((t=>({...t,image:t.image.file.url}))):[]},countProducts(){return this.productsData?this.productsData.pagination.total:0}},methods:{loadProducts(){this.productsLoading=!0,this.productsLoadingFailed=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{Nt.Z.get(`${Qt}/api/products`,{params:{page:this.page,limit:this.productsPerPage,categoryId:this.filterCategoryId,colorId:this.filterColor,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo}}).then((t=>this.productsData=t.data)).catch((()=>this.productsLoadingFailed=!0)).then((()=>this.productsLoading=!1))}),1500)}},watch:{page(){this.loadProducts()},filterPriceFrom(){this.loadProducts()},filterPriceTo(){this.loadProducts()},filterCategoryId(){this.loadProducts()},filterColor(){this.loadProducts()}},created(){this.loadProducts()}};const Ja=(0,v.Z)(Xa,[["render",Xe]]);var tr=Ja;function er(t,e,a,r,o,s){return(0,l.wg)(),(0,l.iD)("h1",null,"Page not found")}var ar={};const rr=(0,v.Z)(ar,[["render",er]]);var lr=rr;const or={key:0,class:"preloader-4"},sr=(0,l._)("div",null,null,-1),ir=(0,l._)("div",null,null,-1),cr=(0,l._)("div",null,null,-1),nr=(0,l._)("div",null,null,-1),ur=(0,l._)("div",null,null,-1),dr=(0,l._)("div",null,null,-1),_r=(0,l._)("div",null,null,-1),pr=(0,l._)("div",null,null,-1),mr=(0,l._)("div",null,null,-1),hr=[sr,ir,cr,nr,ur,dr,_r,pr,mr],gr={key:1,class:"content container"},fr={key:2,class:"content container"},br={class:"content__top"},vr={class:"breadcrumbs"},yr={class:"breadcrumbs__item"},kr={class:"breadcrumbs__item"},wr={class:"breadcrumbs__item"},Pr={class:"breadcrumbs__link"},Cr={class:"item"},Dr={class:"item__pics pics"},Ir={class:"pics__wrapper"},Lr=["src","alt"],zr={class:"item__info"},Tr={class:"item__code"},xr={class:"item__title"},Fr={class:"item__form"},Ur={class:"item__price"},Ar={class:"form__block"},$r=(0,l._)("legend",{class:"form__legend"},"Цвет:",-1),Kr={class:"colors"},Sr={class:"colors__label"},Er=["value","alt"],Zr=(0,l.uE)('<fieldset class="form__block"><legend class="form__legend">Объемб в ГБ:</legend><ul class="sizes sizes--primery"><li class="sizes__item"><label class="sizes__label"><input class="sizes__radio sr-only" type="radio" name="sizes-item" value="32"><span class="sizes__value"> 32gb </span></label></li><li class="sizes__item"><label class="sizes__label"><input class="sizes__radio sr-only" type="radio" name="sizes-item" value="64"><span class="sizes__value"> 64gb </span></label></li><li class="sizes__item"><label class="sizes__label"><input class="sizes__radio sr-only" type="radio" name="sizes-item" value="128" checked=""><span class="sizes__value"> 128gb </span></label></li></ul></fieldset>',1),Or={class:"item__row"},Wr={class:"form__counter"},Mr=(0,l._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-minus"})],-1),Vr=[Mr],jr=(0,l._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-plus"})],-1),qr=[jr],Br={key:0,class:"preloader-4"},Hr=(0,l._)("div",null,null,-1),Yr=(0,l._)("div",null,null,-1),Gr=(0,l._)("div",null,null,-1),Rr=(0,l._)("div",null,null,-1),Nr=(0,l._)("div",null,null,-1),Qr=(0,l._)("div",null,null,-1),Xr=(0,l._)("div",null,null,-1),Jr=(0,l._)("div",null,null,-1),tl=(0,l._)("div",null,null,-1),el=[Hr,Yr,Gr,Rr,Nr,Qr,Xr,Jr,tl],al={key:1,class:"button button--primery",type:"submit"},rl=(0,l.uE)('<div class="item__desc"><ul class="tabs"><li class="tabs__item"><a class="tabs__link tabs__link--current"> Описание </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Характеристики </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Гарантия </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Оплата и доставка </a></li></ul><div class="item__content"><p> Навигация GPS, ГЛОНАСС, BEIDOU Galileo и QZSS<br> Синхронизация со смартфоном<br> Связь по Bluetooth Smart, ANT+ и Wi-Fi<br> Поддержка сторонних приложений<br></p><a href="#"> Все характеристики </a><h3>Что это?</h3><p> Wahoo ELEMNT BOLT GPS – это велокомпьютер, который позволяет оптимизировать свои велотренировки, сделав их максимально эффективными. Wahoo ELEMNT BOLT GPS синхронизируется с датчиками по ANT+, объединяя полученную с них информацию. Данные отображаются на дисплее, а также сохраняются на смартфоне. При этом на мобильное устройство можно установить как фирменное приложение, так и различные приложения сторонних разработчиков. Велокомпьютер точно отслеживает местоположение, принимая сигнал с целого комплекса спутников. Эта информация позволяет смотреть уже преодоленные маршруты и планировать новые велопрогулки. </p><h3>Дизайн</h3><p> Велокомпьютер Wahoo ELEMNT BOLT очень компактный. Размеры устройства составляют всего 74,6 x 47,3 x 22,1 мм. что не превышает габариты смартфона. Корпус гаджета выполнен из черного пластика. На обращенной к пользователю стороне расположен дисплей диагональю 56 мм. На дисплей выводятся координаты и скорость, а также полученная со смартфона и синхронизированных датчиков информация: интенсивность, скорость вращения педалей, пульс и т.д. (датчики не входят в комплект поставки). Корпус велокомпьютера имеет степень защиты от влаги IPX7. Это означает, что устройство не боится пыли, а также выдерживает кратковременное (до 30 минут) погружение в воду на глубину не более 1 метра. </p></div></div>',1);function ll(t,e,a,o,s,i){const c=(0,l.up)("RouterLink");return s.productLoading?((0,l.wg)(),(0,l.iD)("main",or,hr)):s.productData?((0,l.wg)(),(0,l.iD)("main",fr,[(0,l._)("div",br,[(0,l._)("ul",vr,[(0,l._)("li",yr,[(0,l.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Каталог ")])),_:1})]),(0,l._)("li",kr,[(0,l.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(i.category.title),1)])),_:1})]),(0,l._)("li",wr,[(0,l._)("a",Pr,(0,m.zw)(i.product.title),1)])])]),(0,l._)("section",Cr,[(0,l._)("div",Dr,[(0,l._)("div",Ir,[(0,l._)("img",{width:"570",height:"570",src:i.product.image.file.url,alt:i.product.title},null,8,Lr)])]),(0,l._)("div",zr,[(0,l._)("span",Tr,"Артикул: "+(0,m.zw)(i.product.id),1),(0,l._)("h2",xr,(0,m.zw)(i.product.title),1),(0,l._)("div",Fr,[(0,l._)("form",{class:"form",action:"#",method:"POST",onSubmit:e[4]||(e[4]=(0,r.iM)(((...t)=>i.addToCart&&i.addToCart(...t)),["prevent"]))},[(0,l._)("b",Ur,(0,m.zw)(i.product.price.toLocaleString())+" ₽ ",1),(0,l._)("fieldset",Ar,[$r,(0,l._)("ul",Kr,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.product.colors,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"colors__item",key:i.product.id},[(0,l._)("label",Sr,[(0,l.wy)((0,l._)("input",{class:"colors__radio sr-only",type:"radio",name:"color-item",required:"true",value:t.id,"onUpdate:modelValue":e[0]||(e[0]=t=>s.chosenColor=t),alt:t.title},null,8,Er),[[r.G2,s.chosenColor]]),(0,l._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":t.code})},null,4)])])))),128))])]),Zr,(0,l._)("div",Or,[(0,l._)("div",Wr,[(0,l._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[1]||(e[1]=(...t)=>i.decrement&&i.decrement(...t))},Vr),(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>this.productAmount=t)},null,512),[[r.nr,this.productAmount,void 0,{number:!0}]]),(0,l._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[3]||(e[3]=(...t)=>i.increment&&i.increment(...t))},qr)]),s.productAddSending?((0,l.wg)(),(0,l.iD)("div",Br,el)):((0,l.wg)(),(0,l.iD)("button",al," В корзину "))]),(0,l.wy)((0,l._)("div",null,"Товар добавлен в корзину",512),[[r.F8,s.productAdded]])],32)])]),rl])])):((0,l.wg)(),(0,l.iD)("main",gr,"Не удалось загрузить товар"))}var ol={data(){return{productAmount:1,chosenColor:null,productData:null,productLoading:!1,productLoadingFailed:!1,productAdded:!1,productAddSending:!1}},computed:{product(){return this.productData},category(){return this.productData.category}},methods:{...(0,p.nv)(["addProductToCart"]),addToCart(){this.productAdded=!1,this.productAddSending=!0,this.addProductToCart({productId:this.product.id,amount:this.productAmount}).then((()=>{this.productAdded=!0,this.productAddSending=!1}))},increment(){this.productAmount++},decrement(){this.productAmount>0&&this.productAmount--},loadProduct(){this.productLoading=!0,this.productLoadingFailed=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{Nt.Z.get(`${Qt}/api/products/${this.$route.params.id}`).then((t=>this.productData=t.data)).catch((t=>{this.productLoadingFailed=!0,console.log(t)})).then((()=>this.productLoading=!1))}),2e3)}},watch:{"$route.params.id":{handler(){this.loadProduct()},immediate:!0}}};const sl=(0,v.Z)(ol,[["render",ll]]);var il=sl;const cl={key:0,class:"preloader-4"},nl=(0,l._)("div",null,null,-1),ul=(0,l._)("div",null,null,-1),dl=(0,l._)("div",null,null,-1),_l=(0,l._)("div",null,null,-1),pl=(0,l._)("div",null,null,-1),ml=(0,l._)("div",null,null,-1),hl=(0,l._)("div",null,null,-1),gl=(0,l._)("div",null,null,-1),fl=(0,l._)("div",null,null,-1),bl=[nl,ul,dl,_l,pl,ml,hl,gl,fl],vl={key:1,class:"content container"},yl={key:2,class:"content container"},kl={class:"content__top"},wl={class:"breadcrumbs"},Pl={class:"breadcrumbs__item"},Cl={class:"breadcrumbs__item"},Dl=(0,l._)("h1",{class:"content__title"}," Корзина ",-1),Il={class:"content__info"},Ll={class:"cart"},zl={class:"cart__form form",action:"#",method:"POST"},Tl={class:"cart__field"},xl={class:"cart__list"},Fl={class:"cart__block"},Ul=(0,l._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),Al={class:"cart__price"};function $l(t,e,a,r,o,s){const i=(0,l.up)("RouterLink"),c=(0,l.up)("CartItem");return t.productLoading?((0,l.wg)(),(0,l.iD)("main",cl,bl)):t.productsLoadingFailed?((0,l.wg)(),(0,l.iD)("main",vl,"Не удалось загрузить корзину")):((0,l.wg)(),(0,l.iD)("main",yl,[(0,l._)("div",kl,[(0,l._)("ul",wl,[(0,l._)("li",Pl,[(0,l.Wm)(i,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Каталог ")])),_:1})]),(0,l._)("li",Cl,[(0,l.Wm)(i,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Корзина ")])),_:1})])]),Dl,(0,l._)("span",Il,(0,m.zw)(t.products.length)+" товар"+(0,m.zw)(t.grammar(t.products.length)),1)]),(0,l._)("section",Ll,[(0,l._)("form",zl,[(0,l._)("div",Tl,[(0,l._)("ul",xl,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.products,(t=>((0,l.wg)(),(0,l.j4)(c,{key:t.productId,item:t},null,8,["item"])))),128))])]),(0,l._)("div",Fl,[Ul,(0,l._)("p",Al,[(0,l.Uk)(" Итого: "),(0,l._)("span",null,(0,m.zw)(t.totalPrice.toLocaleString())+" ₽",1)]),t.products.length>0?((0,l.wg)(),(0,l.j4)(i,{key:0,tag:"button",to:{name:"order"},class:"cart__button button button--primery",type:"submit"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Оформить заказ ")])),_:1})):(0,l.kq)("",!0)])])])]))}var Kl={mixins:[Rt]};const Sl=(0,v.Z)(Kl,[["render",$l]]);var El=Sl,Zl=a(3076),Ol=a.n(Zl);const Wl=[{name:"main",component:tr,path:"/"},{name:"product",component:il,path:"/product/:id"},{name:"cart",component:El,path:"/cart"},{name:"order",component:te,path:"/order"},{name:"orderInfo",component:Ke,path:"/order/:id"},{name:"notFound",component:lr,path:"/:pathMatch(.*)"}],Ml=(0,L.p7)({history:(0,L.r5)(Ol().publicPath),routes:Wl});var Vl=Ml;const jl=(0,p.MT)({state:{cartProducts:[],userAccessKey:null,cartProductsData:[],orderInfo:null,productsLoading:!1,productsLoadingFailed:!1},mutations:{updateOrderInfo(t,e){t.orderInfo=e},resetCart(t){t.cartProducts=[],t.cartProductsData=[]},updateCartProductAmount(t,{productId:e,amount:a}){const r=t.cartProducts.find((t=>t.productId===e));r&&(r.amount=a)},deleteCartProduct(t,e){t.cartProducts=t.cartProducts.filter((t=>t.productId!==e))},updateUserAccessKey(t,e){t.userAccessKey=e},updatecartProductsData(t,e){t.cartProductsData=e},syncCartProducts(t){t.cartProducts=t.cartProductsData.map((t=>({productId:t.product.id,amount:t.quantity})))}},getters:{cartDetailProducts(t){return t.cartProducts.map((e=>{const{product:a}=t.cartProductsData.find((t=>t.product.id===e.productId));return{...e,product:{...a,image:a.image.file.url}}}))},cartTotalPrice(t,e){return e.cartDetailProducts.reduce(((t,e)=>e.product.price*e.amount+t),0)},orderDetailRequest(t){return t.orderInfo}},actions:{loadOrderInfo(t,e){return Nt.Z.get(`${Qt}/api/orders/${e}`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateOrderInfo",e.data)}))},loadCart(t){return this.productsLoading=!0,this.productsLoadingFailed=!1,Nt.Z.get(`${Qt}/api/baskets`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.state.userAccessKey||(localStorage.setItem("userAccessKey",e.data.user.accessKey),t.commit("updateUserAccessKey",e.data.user.accessKey)),t.commit("updatecartProductsData",e.data.items),t.commit("syncCartProducts")})).catch((()=>this.productsLoadingFailed=!0)).then((()=>this.productsLoading=!1))},addProductToCart(t,{productId:e,amount:a}){return new Promise((t=>setTimeout(t,2e3))).then((()=>Nt.Z.post(`${Qt}/api/baskets/products`,{productId:e,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updatecartProductsData",e.data.items),t.commit("syncCartProducts")}))))},updateCartProductAmount(t,{productId:e,amount:a}){if(t.commit("updateCartProductAmount",{productId:e,amount:a}),!(a<1))return Nt.Z.put(`${Qt}/api/baskets/products`,{productId:e,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updatecartProductsData",e.data.items)})).catch((()=>{t.commit("syncCartProducts")}))},deleteCartProduct(t,e){return Nt.Z["delete"](`${Qt}/api/baskets/products`,{params:{userAccessKey:t.state.userAccessKey},data:e}).then((e=>{t.commit("updatecartProductsData",e.data.items),t.commit("syncCartProducts")}))}},watch:{productsLoading(){return this.productsLoading},productsLoadingFailed(){return this.productsLoadingFailed}}});var ql=jl;const Bl=(0,r.ri)(C);Bl.use(Vl),Bl.use(ql),Bl.mount("#app"),console.log(I.messageOne)},3076:function(t){t.exports={publicPath:"/vue-app/"}}},e={};function a(r){var l=e[r];if(void 0!==l)return l.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,r,l,o){if(!r){var s=1/0;for(u=0;u<t.length;u++){r=t[u][0],l=t[u][1],o=t[u][2];for(var i=!0,c=0;c<r.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((function(t){return a.O[t](r[c])}))?r.splice(c--,1):(i=!1,o<s&&(s=o));if(i){t.splice(u--,1);var n=l();void 0!==n&&(e=n)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[r,l,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/vue-app/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var l,o,s=r[0],i=r[1],c=r[2],n=0;if(s.some((function(e){return 0!==t[e]}))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(c)var u=c(a)}for(e&&e(r);n<s.length;n++)o=s[n],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(u)},r=self["webpackChunkskillbox"]=self["webpackChunkskillbox"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(4918)}));r=a.O(r)})();
//# sourceMappingURL=app.b6cff412.js.map